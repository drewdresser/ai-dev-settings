---
description: Rules for Python backend development
globs: ["**/*.py", "**/pyproject.toml"]
---

# Python Backend Rules

## Package Management

- Use `uv` for all dependency management
- Dependencies defined in `pyproject.toml`
- Never edit `uv.lock` directly

## Commands

```bash
uv run pytest              # Run tests
uv run pytest --cov        # Run with coverage
uv run ruff check .        # Lint
uv run ruff format .       # Format
uv run ty                  # Type check
```

## Code Style

- Prefer explicit type hints for public functions
- Add type hints to functions you modify
- Use `pytest` fixtures over setup/teardown
- Tests mirror source structure in `tests/` directory
- Follow existing patterns; improve when beneficial

## AWS Lambda/ECS

- Use environment variables for configuration
- Never hardcode credentials
- Keep handlers thin; business logic in separate modules
- Prefer infrastructure-as-code (CDK/SAM)
